{% extends "base.html" %}

{% block title %}Exercise Library - Vitruvian Tracker{% endblock %}

{% block content %}
<!-- Dashboard Navbar -->
{% include 'components/navbar_auth.html' %}

<!-- Flash Messages -->
<div class="container mt-3">
    {% include 'components/flash_messages.html' %}
</div>

<!-- Exercise Library Content -->
<div class="page-container">
    <div class="page-header">
        <div class="page-title-section">
            <a href="/workout/workouts" class="back-link">
                <i class="bi bi-arrow-left"></i> Back to Workouts
            </a>
            <h1 class="page-title">
                <i class="bi bi-book"></i> Exercise Library
            </h1>
            <p class="page-subtitle">Browse and search exercise definitions</p>
        </div>
        <div class="page-actions">
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addExerciseModal">
                <i class="bi bi-plus-circle"></i> Add Exercise
            </button>
        </div>
    </div>

    <!-- Search and Filters -->
    <div class="filters-section">
        <div class="filters-row">
            <div class="filter-group flex-grow-1">
                <input type="text" id="search-exercises" class="form-control filter-input"
                       placeholder="Search exercises by name...">
            </div>
            <div class="filter-group">
                <label for="category-filter" class="filter-label">Category</label>
                <select id="category-filter" class="form-select filter-select">
                    <option value="all">All Categories</option>
                    <option value="chest">Chest</option>
                    <option value="back">Back</option>
                    <option value="shoulders">Shoulders</option>
                    <option value="arms">Arms</option>
                    <option value="legs">Legs</option>
                    <option value="core">Core</option>
                    <option value="cardio">Cardio</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="equipment-filter" class="filter-label">Equipment</label>
                <select id="equipment-filter" class="form-select filter-select">
                    <option value="all">All Equipment</option>
                    <option value="barbell">Barbell</option>
                    <option value="dumbbell">Dumbbell</option>
                    <option value="machine">Machine</option>
                    <option value="bodyweight">Bodyweight</option>
                    <option value="cable">Cable</option>
                    <option value="other">Other</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Exercise Grid -->
    <div class="exercise-library-grid" id="exercise-grid">
        <!-- Loading State -->
        <div class="text-center py-5 w-100">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>

    <!-- Pagination -->
    <div id="pagination-container"></div>
</div>

<!-- Add Exercise Modal -->
<div class="modal fade" id="addExerciseModal" tabindex="-1" aria-labelledby="addExerciseModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addExerciseModalLabel">Add Exercise to Library</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="add-exercise-form">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="exercise-name" class="form-label">Exercise Name <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="exercise-name" name="name"
                               placeholder="e.g., Barbell Bench Press" required>
                    </div>
                    <div class="mb-3">
                        <label for="exercise-category" class="form-label">Category <span class="text-danger">*</span></label>
                        <select class="form-select" id="exercise-category" name="category" required>
                            <option value="">Select Category</option>
                            <option value="chest">Chest</option>
                            <option value="back">Back</option>
                            <option value="shoulders">Shoulders</option>
                            <option value="arms">Arms</option>
                            <option value="legs">Legs</option>
                            <option value="core">Core</option>
                            <option value="cardio">Cardio</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="exercise-equipment" class="form-label">Equipment</label>
                        <select class="form-select" id="exercise-equipment" name="equipment">
                            <option value="">Select Equipment</option>
                            <option value="barbell">Barbell</option>
                            <option value="dumbbell">Dumbbell</option>
                            <option value="machine">Machine</option>
                            <option value="bodyweight">Bodyweight</option>
                            <option value="cable">Cable</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="exercise-muscle-groups" class="form-label">Muscle Groups</label>
                        <input type="text" class="form-control" id="exercise-muscle-groups" name="muscle_groups"
                               placeholder="e.g., Chest, Triceps, Shoulders">
                        <div class="form-text">Comma-separated list</div>
                    </div>
                    <div class="mb-3">
                        <label for="exercise-description" class="form-label">Description</label>
                        <textarea class="form-control" id="exercise-description" name="description" rows="3"
                                  placeholder="Brief description or notes about the exercise..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-check-circle"></i> Add Exercise
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Exercise Detail Modal -->
<div class="modal fade" id="exerciseDetailModal" tabindex="-1" aria-labelledby="exerciseDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exerciseDetailModalLabel">Exercise Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="exercise-detail-content">
                    <!-- Content loaded via JavaScript -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-outline-danger" id="delete-exercise-btn">
                    <i class="bi bi-trash"></i> Delete
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="/static/js/common.js"></script>
<script src="/static/js/exercise-library.js"></script>
{% endblock %}
