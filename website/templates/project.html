<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ project_display_name }} - Nathan Bowman</title>
    <meta name="description" content="Explore the {{ project_display_name }} project documentation">

    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/project.css">
    <link rel="stylesheet" href="/static/css/print.css" media="print">
</head>
<body class="project-page">
    <!-- Mobile Header -->
    <header class="mobile-header">
        <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle navigation">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <a href="/" class="mobile-home-link">Home</a>
        <span class="mobile-title">{{ project_display_name }}</span>
    </header>

    <!-- Sidebar Overlay (mobile) -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- Documentation Layout -->
    <div class="docs-wrapper">
        <!-- Sidebar Navigation -->
        <aside class="docs-sidebar" id="docs-sidebar">
            <div class="sidebar-header">
                <a href="/" class="sidebar-home">
                    <span class="home-icon">&#8592;</span> Home
                </a>
                <h2 class="sidebar-title">{{ project_display_name }}</h2>
                <div class="sidebar-badges" id="sidebar-badges"></div>
            </div>

            <nav class="sidebar-nav" id="sidebar-nav" aria-label="Documentation navigation">
                <!-- Overview link -->
                <div class="nav-section">
                    <a href="/project/{{ project_name }}" class="nav-link nav-overview" data-file="">
                        <span class="nav-icon">&#128196;</span> Overview
                    </a>
                </div>

                <!-- Categorized file links will be loaded here -->
                <div id="nav-categories">
                    <div class="loading-spinner">Loading...</div>
                </div>

                <!-- Special links for Health & Fitness -->
                {% if project_name == 'Health_and_Fitness' %}
                <div class="nav-section nav-section-special">
                    <a href="/health-and-fitness/graphs" class="nav-link nav-special">
                        <span class="nav-icon">&#128200;</span> Health Graphs
                    </a>
                </div>
                {% endif %}
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="docs-main">
            <!-- Breadcrumb Navigation -->
            <nav class="breadcrumb-container" aria-label="Breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item"><a href="/#all-projects">Projects</a></li>
                    <li class="breadcrumb-item">
                        <a href="/project/{{ project_name }}">{{ project_display_name }}</a>
                    </li>
                    <li class="breadcrumb-item active" id="breadcrumb-file" aria-current="page"></li>
                </ol>
            </nav>

            <!-- Content Header -->
            <header class="content-header">
                <h1 class="content-title" id="content-title">Loading...</h1>
                <div class="content-actions">
                    <button class="btn btn-sm btn-outline-secondary" id="print-btn" aria-label="Print page">
                        Print
                    </button>
                </div>
            </header>

            <!-- Article Content -->
            <article class="content-body" id="content-body">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>Loading content...</p>
                </div>
            </article>

            <!-- Bottom Navigation -->
            <nav class="content-nav" id="content-nav">
                <a href="#" class="nav-prev" id="nav-prev" style="visibility: hidden;">
                    <span class="nav-label">Previous</span>
                    <span class="nav-title" id="prev-title"></span>
                </a>
                <a href="#" class="nav-next" id="nav-next" style="visibility: hidden;">
                    <span class="nav-label">Next</span>
                    <span class="nav-title" id="next-title"></span>
                </a>
            </nav>
        </main>

        <!-- Table of Contents (Right Sidebar) -->
        <aside class="docs-toc" id="docs-toc">
            <div class="toc-header">
                <h3>On This Page</h3>
            </div>
            <nav class="toc-nav" id="toc-nav" aria-label="Table of contents">
                <!-- Generated from content headings -->
            </nav>
        </aside>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        // Pass server-side data to JavaScript
        window.PROJECT_DATA = {
            name: "{{ project_name }}",
            displayName: "{{ project_display_name }}",
            initialFile: {{ initial_file | tojson | safe if initial_file else 'null' }}
        };
    </script>
    <script src="/static/js/project.js"></script>
</body>
</html>
