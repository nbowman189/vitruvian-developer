<!-- Pagination Component -->
{% if pagination and pagination.pages > 1 %}
<nav aria-label="Page navigation" class="pagination-nav">
    <ul class="pagination justify-content-center">
        <!-- First Page -->
        <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for(endpoint, page=1, **url_params) }}"
               aria-label="First" {% if not pagination.has_prev %}tabindex="-1" aria-disabled="true"{% endif %}>
                <i class="bi bi-chevron-double-left"></i>
            </a>
        </li>

        <!-- Previous Page -->
        <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for(endpoint, page=pagination.prev_num, **url_params) if pagination.has_prev else '#' }}"
               aria-label="Previous" {% if not pagination.has_prev %}tabindex="-1" aria-disabled="true"{% endif %}>
                <i class="bi bi-chevron-left"></i>
            </a>
        </li>

        <!-- Page Numbers -->
        {% set start_page = [pagination.page - 2, 1]|max %}
        {% set end_page = [pagination.page + 2, pagination.pages]|min %}

        {% if start_page > 1 %}
            <li class="page-item disabled"><span class="page-link">...</span></li>
        {% endif %}

        {% for page_num in range(start_page, end_page + 1) %}
            <li class="page-item {% if page_num == pagination.page %}active{% endif %}">
                <a class="page-link" href="{{ url_for(endpoint, page=page_num, **url_params) }}"
                   {% if page_num == pagination.page %}aria-current="page"{% endif %}>
                    {{ page_num }}
                </a>
            </li>
        {% endfor %}

        {% if end_page < pagination.pages %}
            <li class="page-item disabled"><span class="page-link">...</span></li>
        {% endif %}

        <!-- Next Page -->
        <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for(endpoint, page=pagination.next_num, **url_params) if pagination.has_next else '#' }}"
               aria-label="Next" {% if not pagination.has_next %}tabindex="-1" aria-disabled="true"{% endif %}>
                <i class="bi bi-chevron-right"></i>
            </a>
        </li>

        <!-- Last Page -->
        <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for(endpoint, page=pagination.pages, **url_params) }}"
               aria-label="Last" {% if not pagination.has_next %}tabindex="-1" aria-disabled="true"{% endif %}>
                <i class="bi bi-chevron-double-right"></i>
            </a>
        </li>
    </ul>
    <div class="pagination-info text-center text-muted mt-2">
        Showing {{ pagination.per_page * (pagination.page - 1) + 1 }} -
        {{ [pagination.per_page * pagination.page, pagination.total]|min }} of {{ pagination.total }} results
    </div>
</nav>
{% endif %}
